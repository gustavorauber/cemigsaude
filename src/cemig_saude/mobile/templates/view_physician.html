{% extends "index.html" %}

{% block header %}
<a href="/" data-icon="home">In√≠cio</a>
<h1>{{physician.get_name|title}}</h1>
{% endblock %}          

{% block content %}
<div class="ui-bar-c ui-corner-all ui-shadow" style="padding: 1em;">
    Telefone: <a href="tel:{{physician.get_phone}}">{{physician.get_phone}}</a>
    <br /><br /> 
    <div id="map-canvas" style="height:400px;"></div>	
</div>
{% endblock %}    

{% block javascript %}
<script type="text/javascript">
$(document).bind("pageshow", function() {
	console.log('pageshow');
	
	var myLatlng = new google.maps.LatLng({{physician.get_lat}}, {{physician.get_lon}});
    var mapOptions = {
      zoom: 15,
      center: myLatlng
    };

    var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
    window.map = map;
    window.markers = [];

    var contentString = '<div>'+
        '<div id="siteNotice">'+
        '</div>'+
        '<h2 class="firstHeading">{{physician.get_name|title}}</h2>'+
        '<div>'+
        '<p><b>Especialidade(s)</b>: {{physician.get_specialty|title}} ' +
        '<p><b>Endereco</b>: {{physician.get_street_address}} ' +      
        '</div>'+
        '</div>';

    var infowindow = new google.maps.InfoWindow({
        content: contentString
    });

    var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        title: '{{physician.get_name|title}}'
    });

    window.markers.push(marker);
    google.maps.event.addListener(marker, 'click', function() {
      infowindow.open(map,marker);
    });    
    
    infowindow.open(map, marker);
});
</script>    
{% endblock %}
